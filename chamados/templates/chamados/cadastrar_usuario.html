{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="max-w-lg mx-auto bg-white shadow-lg rounded-2xl p-6">
    <h2 class="text-2xl font-bold mb-4 text-gray-800">üë§ Cadastrar Novo Usu√°rio</h2>

    <form method="post" class="space-y-4">
        {% csrf_token %}
        
        <!-- Nome de usu√°rio -->
        <div>
            <label for="username" class="block text-sm font-medium text-gray-700 mb-1">Usu√°rio</label>
            <input type="text" id="username" name="username" required
                   class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:outline-none">
        </div>

        <!-- Nome completo -->
        <div>
            <label for="first_name" class="block text-sm font-medium text-gray-700 mb-1">Nome completo</label>
            <input type="text" id="first_name" name="first_name"
                   class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:outline-none">
        </div>

        <!-- E-mail -->
        <div>
            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">E-mail</label>
            <input type="email" id="email" name="email"
                   class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:outline-none">
        </div>

        <div>
            <label for="fone" class="block text-sm font-medium text-gray-700 mb-1">Telefone</label>
            <input type="fone" id="fone" name="fone" required
                   class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:outline-none">
        </div>

        <!-- Senha -->
        <div>
            <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Senha</label>
            <input type="password" id="password" name="password" required
                   class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:outline-none">
        </div>

        <!-- Tipo de perfil -->
        {% if user.papel == 'admin' %}
        <div>
            <label for="papel" class="block text-sm font-medium text-gray-700 mb-1">Perfil</label>
            <select id="papel" name="papel"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:outline-none">
                <option value="usuario">Usu√°rio</option>
                <option value="gestor">Gestor</option>
                <option value="admin">Admin</option>
            </select>
        </div>
        {% else %}
        <!-- Gestores s√≥ podem criar usu√°rios -->
        <input type="hidden" name="papel" value="usuario">
        {% endif %}

        <!-- Bot√£o -->
        <div class="pt-4">
            <button type="submit"
                    class="w-full bg-blue-600 text-white py-2 rounded-md font-semibold hover:bg-blue-700 transition">
                ‚ûï Criar Usu√°rio
            </button>
        </div>
    </form>
</div>

{% if messages %}
<div class="mt-6 max-w-lg mx-auto">
    {% for message in messages %}
        <div class="
            px-4 py-3 rounded-lg shadow text-sm font-medium mb-2
            {% if message.tags == 'warning' %}bg-yellow-100 text-yellow-800{% endif %}
            {% if message.tags == 'success' %}bg-green-100 text-green-800{% endif %}
            {% if message.tags == 'error' %}bg-red-100 text-red-800{% endif %}
            {% if message.tags == 'info' %}bg-blue-100 text-blue-800{% endif %}">
            {{ message }}
        </div>
    {% endfor %}
</div>
{% endif %}
{% endblock %}
